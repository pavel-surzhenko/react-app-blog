(this["webpackJsonprtx-feed"]=this["webpackJsonprtx-feed"]||[]).push([[0],{123:function(e,t,s){},241:function(e,t,s){"use strict";s.r(t);var r=s(7),c=s(22),a=s(6),o=s(8),n=(s(122),s(123),s(28));const i=Object.freeze({SET_TOKEN:"SET_TOKEN",SET_ERROR:"SET_ERROR",RESET_ERROR:"RESET_ERROR"}),l=Object.freeze({SET_SELECTED_POST_ID:"SET_SELECTED_POST_ID"}),d=Object.freeze({UPDATE_PASSWORD:"UPDATE_PASSWORD",START_FETCHING:"START_FETCHING",STOP_FETCHING:"STOP_FETCHING"}),j={token:"",errorMessage:"",error:!1},b={isPostOpen:!1,postId:""},h={token:"",isFetching:!1},m=Object(n.b)({auth:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SET_TOKEN:return{...e,token:t.payload,error:!1,errorMessage:""};case i.RESET_ERROR:return{...e,error:!1,errorMessage:""};case i.SET_ERROR:return{...e,error:!0,errorMessage:t.payload};default:return e}},posts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return t.type===l.SET_SELECTED_POST_ID?{...e,postId:t.payload}:e},password:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.START_FETCHING:return{...e,isFetching:!0};case d.STOP_FETCHING:return{...e,isFetching:!1};case d.UPDATE_PASSWORD:return{...e,isFetching:!1,token:null===t||void 0===t?void 0:t.payload};default:return e}}});var u=s(101),O=s(102);Object(u.createLogger)({duration:!0,collapsed:!0,colors:{title:e=>e.error?"firebrick":"deepskyblue",prevState:()=>"#1C5FAF",action:()=>"#149945",nextState:()=>"#A47104",error:()=>"#ff0005"}}),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;const p=n.c,x=[O.a];const f=Object(n.d)(m,p(Object(n.a)(...x)));var g=s(4),v=s(29),S=s(1);const w=()=>Object(S.jsx)("footer",{className:"footer",children:Object(S.jsx)("p",{children:"\xa9 Surzhenko P 2022"})});var y=s(244);const E=e=>{const{author:t,body:s,created:r}=e,c=Object(y.a)(new Date(r),new Date,{addSuffix:!0,includeSeconds:!0});return Object(S.jsx)("ul",{children:Object(S.jsxs)("li",{className:"commentBody",children:[Object(S.jsxs)("p",{children:[t.name,Object(S.jsx)("span",{children:c})]}),Object(S.jsx)("p",{children:s})]})})};var N=s(16),T=s.n(N);const k="https://lab.lectrum.io",C=`${k}/rtx/api/feed`,P=`${k}/rtx/api/live`,_={get token(){return localStorage.getItem("token")},auth:{async signup(e){const{data:t}=await T.a.post(`${P}/register`,e,{headers:{"Content-Type":"application/json"}});return t},async login(e){const{data:t}=await T.a.post(`${P}/login`,e,{headers:{"Content-Type":"application/json"}});return t},async auth(){const{data:e}=await T.a.get(`${P}/auth`,{headers:{Authorization:`Bearer ${_.token}`}});return e},logout:()=>fetch(`${P}/logout`,{method:"GET",headers:{Authorization:`Bearer ${_.token}`}})},posts:{async fetch(){const{data:e}=await T.a.get(C,{headers:{Authorization:this.token}});return e},async create(e){const{data:t}=await T.a.post(C,e,{headers:{Authorization:`Bearer ${_.token}`}});return t},remove:e=>fetch(`${C}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${_.token}`}}),like:e=>fetch(`${C}/${e}/like`,{method:"PUT",headers:{Authorization:`Bearer ${_.token}`}}),unlike:e=>fetch(`${C}/${e}/unlike`,{method:"PUT",headers:{Authorization:`Bearer ${_.token}`}}),async comment(e){let{hash:t,body:s}=e;const{data:r}=await T.a.put(`${C}/${t}/comment`,{body:s},{headers:{Authorization:`Bearer ${_.token}`}});return r},async getComments(){const{data:e}=await T.a.get(`${C}/comments`);return e},async getPostById(e){const{data:t}=await T.a.get(`${C}/${e}`);return t}},profile:{async fetch(){const{data:e}=await T.a.get(`${P}/profile`,{headers:{Authorization:`Bearer ${_.token}`}});return e.data},updateProfile:e=>fetch(`${P}/profile`,{method:"PUT",headers:{Authorization:`Bearer ${_.token}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),updateAvatar(e){return fetch(`${P}/image`,{method:"POST",headers:{Authorization:this.token},body:e})},async updatePassword(e){const{data:t}=await T.a.post(`${P}/reset-password`,e,{headers:{Authorization:`Bearer ${_.token}`}});return t}},users:{fetch(){return fetch(`${P}/users`,{method:"GET",headers:{Authorization:this.token}})}}},R=()=>{const e=Object(a.useQuery)("posts",_.posts.fetch),{data:t,isFetched:s,refetch:r}=e;return{data:(null===t||void 0===t?void 0:t.data)||[],isFetched:s,refetch:r}},$=()=>{const e=Object(a.useQuery)("recentComments",_.posts.getComments),{data:t,isFetched:s,refetch:r}=e;return{data:(null===t||void 0===t?void 0:t.data)||[],isFetched:s,refetch:r}};var F=s(0);const A=Object.freeze({resetError:()=>({type:i.RESET_ERROR}),setError:e=>({type:i.SET_ERROR,error:!0,payload:e}),setToken:e=>({type:i.SET_TOKEN,payload:e})}),D=Object.freeze({setPostId:e=>({type:l.SET_SELECTED_POST_ID,payload:e})}),I=Object.freeze({position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),z=Object.freeze({startFetching:()=>({type:d.START_FETCHING}),stopFetching:()=>({type:d.STOP_FETCHING}),updatePassword:e=>({type:d.UPDATE_PASSWORD,payload:e}),updatePasswordAsync:e=>async t=>{if(!e)return null;try{t(z.startFetching());const s=await _.profile.updatePassword(e);localStorage.removeItem("token"),localStorage.setItem("token",null===s||void 0===s?void 0:s.data),t(z.updatePassword(null===s||void 0===s?void 0:s.data)),Object(v.c)("Password has been change",I)}catch(s){t(A.setError(s.message))}finally{t(z.stopFetching())}}}),M=()=>{const e=Object(a.useQuery)("profile",_.profile.fetch),{data:t,isFetched:s,refetch:r}=e;return{data:t,isFetched:s,refetch:r}},B=()=>{const e=Object(a.useQuery)("token",_.auth.auth,{retry:!1}),{data:t,error:s}=e,c=Object(r.b)(),o=Object(g.h)();Object(F.useEffect)((()=>{t&&"success"===t.status&&c(A.setToken(t))}),[t]),Object(F.useEffect)((()=>{(null===s||void 0===s?void 0:s.message)&&(c(A.setError(s.message)),o("/login"))}),[s])};const L=()=>{var e;const t=M(),s=function(){const e=Object(r.b)(),t=Object(g.h)(),s=Object(a.useMutation)((()=>_.auth.logout()),{onError:t=>{e(A.setError(null===t||void 0===t?void 0:t.message))}});return Object(F.useEffect)((()=>{s.isSuccess&&(localStorage.removeItem("token"),t("/login"))}),[s.isSuccess]),s}();return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"navigation-profile",children:[Object(S.jsxs)("div",{className:"profile-wrapper",children:[Object(S.jsx)("img",{src:"https://placeimg.com/256/256/animals",alt:"",className:"navigation-avatar"}),Object(S.jsx)("div",{className:"user-status",children:Object(S.jsx)("div",{className:"status online",children:Object(S.jsx)("span",{})})})]}),null===(e=t.data)||void 0===e?void 0:e.name]}),Object(S.jsx)(o.c,{to:"/profile",className:"navigation-item",children:"Profile"}),Object(S.jsx)(o.c,{to:"/feed",className:"navigation-item",children:"Wall"}),Object(S.jsx)("button",{className:"logout",onClick:()=>s.mutate(),children:"Log out"})]})},H=e=>e.posts.postId,q=e=>{let{className:t}=e;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsx)("path",{d:"M14.0442 2.99199L14.1869 2.99234C18.0754 3.06553 21.0906 6.12406 21.096 10.03V10.045C21.0933 12.1512 20.0647 14.3074 18.3184 15.7855C17.5518 16.434 15.6384 17.7416 13.838 18.9351C12.0679 20.1086 10.4636 21.1349 10.3152 21.2294C10.3149 21.2284 10.3146 21.2274 10.3143 21.2264C10.3131 21.2222 10.3121 21.2183 10.3114 21.2147L10.311 21.2129V17.404V16.6822L9.58973 16.6545C5.67502 16.5045 2.84601 13.6916 2.84601 10.034C2.84601 6.07302 5.93641 2.98199 9.89601 2.98199H9.89711H9.89801L14.0442 2.99199Z",stroke:"#616770",strokeWidth:"1.5"})})})},G=e=>{let{className:t}=e;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(S.jsx)("path",{d:"M12.8785 20.6337C12.475 20.8136 12.1835 20.8814 12.0031 20.886H12H11.9535C11.7712 20.873 11.4932 20.8025 11.1187 20.6354C10.7213 20.4581 10.2595 20.1922 9.75608 19.8424C8.74949 19.1432 7.62035 18.1397 6.56267 16.9366C4.42616 14.5063 2.70001 11.4004 2.70001 8.478C2.70001 5.78296 4.93307 3.474 7.35301 3.474C9.27104 3.474 10.6155 4.8003 11.3873 5.88801L11.9992 6.75035L12.6108 5.88781C13.3807 4.80204 14.7252 3.474 16.644 3.474C19.0659 3.474 21.298 5.78287 21.298 8.479C21.298 11.4003 19.5717 14.5056 17.4349 16.9356C16.3771 18.1386 15.2479 19.1419 14.2412 19.841C13.7377 20.1906 13.2759 20.4565 12.8785 20.6337Z",stroke:"#616770",strokeWidth:"1.5"})})})};var W=s(18),U=s(10);const Q=e=>e.auth.token,K=e=>e.auth.errorMessage,V=e=>e.password,J=e=>{var t;let s=Object(S.jsx)("input",{placeholder:e.placeholder,type:e.type,...e.register});return"textarea"===e.tag&&(s=Object(S.jsx)("textarea",{placeholder:e.placeholder,...e.register})),Object(S.jsxs)("label",{children:[s,Object(S.jsx)("div",{children:Object(S.jsx)("span",{style:{color:"red",fontSize:"10px",text:"left"},className:"error-message",children:null===(t=e.error)||void 0===t?void 0:t.message})})]})};J.defaultProps={type:"text",tag:"input"};var X=s(9);const Z=X.a().shape({body:X.c().min(5,"text must be longer").required("write text")}),Y=()=>{const e=Object(r.c)(H),t=(()=>{const e=Object(r.b)(),t=$(),s=R(),c=Object(a.useMutation)((e=>{let{hash:t,body:s}=e;return _.posts.comment({hash:t,...s})}),{onError:t=>{e(A.setError(null===t||void 0===t?void 0:t.message))}});return Object(F.useEffect)((()=>{c.isSuccess&&(t.refetch(),s.refetch())}),[c.isSuccess]),c})(),s=Object(U.d)({mode:"onTouched",resolver:Object(W.a)(Z)}),c=s.handleSubmit((async r=>{await t.mutate({hash:e,body:r}),s.reset()}));return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("form",{className:"commentForm",onSubmit:c,children:[Object(S.jsx)("img",{src:"https://placeimg.com/256/256/animals",alt:"avatar",className:"comment-avatar"}),Object(S.jsxs)("label",{children:[Object(S.jsx)("div",{children:Object(S.jsx)("span",{className:"error-message"})}),Object(S.jsx)(J,{placeholder:"Comments...",type:"text",register:s.register("body"),error:s.formState.errors.body})]}),Object(S.jsx)("button",{type:"submit",children:"Comment"})]}),Object(S.jsx)("hr",{className:"separator"})]})},ee=e=>{const t=function(){const e=Object(r.b)(),t=R(),s=Object(a.useMutation)((e=>_.posts.remove(e)),{onError:t=>{e(A.setError(null===t||void 0===t?void 0:t.message))}});return Object(F.useEffect)((()=>{s.isSuccess&&t.refetch()}),[s.isSuccess]),s}(),s=(()=>{const e=Object(r.b)(),t=R(),s=Object(a.useMutation)((e=>_.posts.like(e)),{onError:t=>{e(A.setError(null===t||void 0===t?void 0:t.message))}});return Object(F.useEffect)((()=>{s.isSuccess&&t.refetch()}),[s.isSuccess]),s})(),c=(()=>{const e=Object(r.b)(),t=R(),s=Object(a.useMutation)((e=>_.posts.unlike(e)),{onError:t=>{e(A.setError(null===t||void 0===t?void 0:t.message))}});return Object(F.useEffect)((()=>{s.isSuccess&&t.refetch()}),[s.isSuccess]),s})(),o=Object(r.b)(),n=Object(r.c)(H),{data:{hash:i,name:l}}=M(),{body:d,author:j,created:b,hash:h,comments:m,likes:u}=e,O=Object(y.a)(new Date(b),new Date,{addSuffix:!0,includeSeconds:!0}),p=u.filter((e=>e.name===l)),x=u.map((e=>Object(S.jsxs)("li",{children:[" ",e.name]},e.hash))),[f,g]=Object(F.useState)(!1),v=m.map((e=>Object(S.jsx)(E,{...e},e.hash)));return Object(S.jsxs)("section",{className:"post",children:[Object(S.jsx)("img",{src:"https://placeimg.com/256/256/animals",alt:"avatar"}),j.hash===i?Object(S.jsx)("span",{className:"cross",onClick:()=>t.mutate(h)}):"",Object(S.jsx)("a",{children:j.name}),Object(S.jsxs)("time",{children:[" ",O]}),Object(S.jsx)("p",{children:d}),Object(S.jsxs)("div",{className:"reaction-controls",children:[Object(S.jsxs)("section",{className:"like",children:[Object(S.jsxs)("div",{onMouseEnter:()=>{g(!0)},onMouseLeave:()=>{g(!1)},children:[f&&0!==u.length&&Object(S.jsxs)("ul",{children:[" ",x," "]}),Object(S.jsx)("span",{children:u.length})]}),Object(S.jsxs)("span",{onClick:()=>{p.length?c.mutate(h):s.mutate(h)},className:`icon ${p.length?"liked":""} `,children:[Object(S.jsx)(G,{}),"Like"]})]}),Object(S.jsxs)("span",{className:"comment",onClick:()=>{o(D.setPostId(e.hash===n?"":e.hash))},children:[Object(S.jsx)(q,{className:"comment-icon"}),`${m.length}  comment${m.length>0?"":"s"}`]})]}),n===h&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Y,{})," ",v]})]})},te=X.a().shape({body:X.c().min(3,"text must be longer").required("write text")}),se=()=>{const e=Object(a.useMutation)((e=>_.posts.create(e))),t=R(),s=Object(U.d)({mode:"onTouched",resolver:Object(W.a)(te)}),r=s.handleSubmit((async r=>{await e.mutateAsync(r),t.refetch(),s.reset()}));return Object(S.jsxs)("section",{className:"composer",children:[Object(S.jsx)("img",{src:"https://placeimg.com/256/256/animals",alt:"avatar"}),Object(S.jsxs)("form",{onSubmit:r,children:[Object(S.jsxs)("label",{children:[Object(S.jsx)("div",{children:Object(S.jsx)("span",{className:"error-message"})}),Object(S.jsx)(J,{placeholder:"What's on your mind, Chuck Norris?",error:s.formState.errors.body,register:s.register("body"),tag:"textarea"})]}),Object(S.jsx)("button",{type:"submit",children:"post"})]})]})},re=()=>Object(S.jsx)("span",{style:{color:"#fff",fontSize:"25px"},children:"Loading..."}),ce=()=>{const{data:e,isFetched:t,refetch:s}=R(),r=e.map((e=>Object(S.jsx)(ee,{...e},e.hash)));return Object(F.useEffect)((()=>{s()}),[e]),Object(S.jsxs)("div",{className:"posts",children:[Object(S.jsx)("h1",{className:"title",children:"Wall"}),Object(S.jsx)(se,{}),Object(S.jsx)("div",{className:"posts-container",children:t?r:Object(S.jsx)(re,{})})]})},ae="min length - ${min}",oe=X.a().shape({firstName:X.c().min(3,ae).required("enter first name"),lastName:X.c().min(3,ae).required("enter last name")}),ne=()=>{const e=M(),t=Object(a.useMutation)((e=>_.profile.updateProfile(e))),[s,r]=Object(F.useState)();Object(F.useEffect)((()=>{var t;e.isFetched&&r(null===(t=e.data)||void 0===t?void 0:t.name)}),[e]);const c=Object(U.d)({mode:"onTouched",resolver:Object(W.a)(oe)}),n=c.handleSubmit((async s=>{await t.mutateAsync(s),e.refetch(),c.reset()}));return Object(S.jsx)("form",{onSubmit:n,className:"form",children:Object(S.jsxs)("div",{className:"wrapper",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:`Hi, ${s}`}),Object(S.jsx)("img",{src:"https://placeimg.com/256/256/animals",alt:"avatar"}),Object(S.jsx)(J,{placeholder:"Name",type:"text",error:c.formState.errors.firstName,register:c.register("firstName")}),Object(S.jsx)(J,{placeholder:"Last name",type:"text",error:c.formState.errors.lastName,register:c.register("lastName")}),Object(S.jsx)("button",{className:"loginSubmit",type:"submit",children:"Update profile"})]}),Object(S.jsx)(o.b,{to:"/new-password",children:"Change password"})]})})},ie=e=>{const{body:t,author:s,created:r,post:c}=e,a=Object(y.a)(new Date(r),new Date,{addSuffix:!0,includeSeconds:!0});return Object(S.jsxs)("div",{className:"comment",children:[Object(S.jsx)("p",{className:"name",children:s.name}),Object(S.jsx)("time",{children:a}),Object(S.jsx)("p",{className:"body",children:t}),Object(S.jsx)(o.b,{to:c.hash,children:"More comments"})]})},le=()=>{const{data:e,isFetched:t}=$(),s=e.map((e=>Object(S.jsx)(ie,{...e},e.hash)));return Object(S.jsxs)("div",{className:"most-recent-comments",children:[Object(S.jsx)("h1",{className:"title",children:"Recent comments"}),Object(S.jsx)("section",{children:t?s:Object(S.jsx)(re,{})})]})},de=e=>{const{body:t,created:s,author:r}=e,c=Object(y.a)(new Date(s),new Date,{addSuffix:!0,includeSeconds:!0});return Object(S.jsxs)("div",{className:"comment",children:[Object(S.jsx)("p",{children:r.name}),Object(S.jsx)("time",{children:c}),Object(S.jsx)("p",{children:t})]})},je=()=>{const{id:e}=Object(g.i)(),t=Object(g.h)(),{data:{body:s,created:r,hash:c,comments:o,author:n},isFetched:i}=(e=>{const{data:t,isFetched:s}=Object(a.useQuery)(["postById",e],(()=>_.posts.getPostById(e)),{retry:!1});return{data:(null===t||void 0===t?void 0:t.data)||{},isFetched:s}})(e),l=null===o||void 0===o?void 0:o.map((e=>Object(S.jsx)(de,{...e},e.hash))),d=Object(y.a)(new Date(null!==r&&void 0!==r?r:null),new Date,{addSuffix:!0,includeSeconds:!0});return Object(F.useEffect)((()=>{!c&&i&&t("/feed",{replace:!0})}),[c,i]),Object(S.jsx)("section",{children:Object(S.jsxs)("div",{className:"comment",children:[Object(S.jsx)("p",{className:"name",children:(null===n||void 0===n?void 0:n.name)||Object(S.jsx)(re,{})}),Object(S.jsx)("time",{children:d}),Object(S.jsxs)("p",{className:"body",children:[" ",s," "]}),Object(S.jsx)("p",{className:"subtitle",children:"Recent comments"}),i?l:Object(S.jsx)(re,{})]})})},be=()=>(B(),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ce,{}),Object(S.jsx)(le,{})]})),he=()=>(B(),Object(S.jsx)(ne,{})),me=()=>(B(),Object(S.jsxs)("div",{className:"wrapper",children:[Object(S.jsxs)(o.b,{to:"/feed",className:"link-back",children:[Object(S.jsx)("div",{className:"arrow"}),"back"]}),Object(S.jsx)("h1",{className:"title",children:"Post comments"}),Object(S.jsx)(je,{})]})),ue="min length - ${min}",Oe=X.a().shape({name:X.c().min(2,ue).required("*"),email:X.c().email("please enter correct email").required("enter email"),password:X.c().min(5,ue).required("*"),confirmPassword:X.c().oneOf([X.b("password")],"password must match").required("please confirm password")}),pe=()=>{const e=(()=>{const e=Object(r.b)(),t=Object(g.h)(),s=Object(a.useMutation)((e=>_.auth.signup(e)));return Object(F.useEffect)((()=>{if(s.isSuccess){var r;const c=null===(r=s.data)||void 0===r?void 0:r.data;e(A.setToken(c)),localStorage.setItem("token",c),t("/feed")}}),[s.isSuccess]),s})(),t=Object(U.d)({mode:"onTouched",resolver:Object(W.a)(Oe)}),s=t.handleSubmit((async s=>{const{confirmPassword:r,...c}=s;await e.mutateAsync(c),t.reset()}));return Object(S.jsx)("form",{onSubmit:s,className:"form centered",children:Object(S.jsxs)("div",{className:"wrapper centered",children:[Object(S.jsx)("div",{className:"logo"}),Object(S.jsx)("div",{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(J,{placeholder:"Name",error:t.formState.errors.name,register:t.register("name")}),Object(S.jsx)(J,{placeholder:"Email",type:"email",error:t.formState.errors.email,register:t.register("email")}),Object(S.jsx)(J,{placeholder:"Password",type:"password",error:t.formState.errors.password,register:t.register("password")}),Object(S.jsx)(J,{placeholder:"Password",type:"password",error:t.formState.errors.confirmPassword,register:t.register("confirmPassword")}),Object(S.jsx)("button",{className:"signupSubmit",type:"submit",children:"Create account"})]})}),Object(S.jsxs)("p",{className:"options",children:["Have account?",Object(S.jsx)(o.b,{to:"/login",children:"Log in"})]})]})})},xe=()=>Object(S.jsx)(pe,{}),fe=X.a().shape({email:X.c().email("please enter correct email").required("enter email"),password:X.c().min(5,"min length - ${min}").required("*")}),ge=()=>{const e=(()=>{const e=Object(r.b)(),t=Object(g.h)(),s=Object(a.useMutation)((e=>_.auth.login(e)),{onError(t){const{response:s}=t;401===(null===s||void 0===s?void 0:s.status)?e(A.setError("Invalid login or password")):e(A.setError("request error"))}});return Object(F.useEffect)((()=>{if(s.isSuccess){var r;const c=null===(r=s.data)||void 0===r?void 0:r.data;e(A.setToken(c)),localStorage.setItem("token",c),t("/feed")}}),[s.isSuccess]),s})(),t=Object(U.d)({mode:"onTouched",resolver:Object(W.a)(fe)}),s=t.handleSubmit((async s=>{await e.mutateAsync(s),t.reset()}));return Object(S.jsx)("form",{onSubmit:s,className:"form centered",children:Object(S.jsxs)("div",{className:"wrapper centered",children:[Object(S.jsx)("div",{className:"logo"}),Object(S.jsxs)("div",{children:[Object(S.jsx)(J,{placeholder:"Email",type:"email",error:t.formState.errors.email,register:t.register("email")}),Object(S.jsx)(J,{placeholder:"Password",type:"password",error:t.formState.errors.password,register:t.register("password")}),Object(S.jsx)("button",{className:"loginSubmit",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(S.jsxs)("p",{className:"options",children:["Don't have an account? ",Object(S.jsx)(o.b,{to:"/signup",children:"Sign up"})]})]})})},ve=()=>Object(S.jsx)(ge,{}),Se=()=>{const e=Object(r.b)(),t=Object(r.c)(Q),s=Object(r.c)(V),c=Object(U.d)({mode:"onTouched"});Object(F.useEffect)((()=>{s.token!==t&&e(A.setToken(s.token||t))}),[s.token]);const a=c.handleSubmit((async t=>{await e(z.updatePasswordAsync(t)),c.reset()}));return Object(S.jsx)("form",{className:"form",onSubmit:a,children:Object(S.jsxs)("div",{className:"wrapper",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Change password"}),Object(S.jsxs)("label",{children:[Object(S.jsx)("div",{children:Object(S.jsx)("span",{className:"error-message"})}),Object(S.jsx)("input",{placeholder:"old password",name:"oldPassword",type:"password",...c.register("oldPassword")})]}),Object(S.jsxs)("label",{children:[Object(S.jsx)("div",{children:Object(S.jsx)("span",{className:"error-message"})}),Object(S.jsx)("input",{placeholder:"new password",name:"newPassword",type:"password",...c.register("newPassword")})]}),Object(S.jsx)("button",{className:"loginSubmit",type:"submit",children:"Change password"})]}),Object(S.jsx)(o.b,{to:"/profile",children:"Back"})]})})},we=()=>(B(),Object(S.jsx)(Se,{})),ye=()=>Object(S.jsx)("div",{className:"feed-wrapper",children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)(L,{}),Object(S.jsx)(g.b,{})]})}),Ee=()=>((()=>{const e=Object(r.c)(K),t=Object(r.b)();Object(F.useEffect)((()=>{e&&(v.c.error(e,I),t(A.resetError()))}),[e])})(),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(v.b,{newestOnTop:!0,transition:v.a}),Object(S.jsx)("main",{children:Object(S.jsxs)(g.e,{children:[Object(S.jsxs)(g.c,{path:"/",element:Object(S.jsx)(ye,{}),children:[Object(S.jsx)(g.c,{path:"/",element:Object(S.jsx)(g.a,{to:"/feed",replace:!0})}),Object(S.jsx)(g.c,{path:"/feed",element:Object(S.jsx)(be,{})}),Object(S.jsx)(g.c,{path:"/feed/:id",element:Object(S.jsx)(me,{})}),Object(S.jsx)(g.c,{path:"/profile",element:Object(S.jsx)(he,{})}),Object(S.jsx)(g.c,{path:"/new-password",element:Object(S.jsx)(we,{})})]}),Object(S.jsx)(g.c,{path:"/signup",element:Object(S.jsx)(xe,{})}),Object(S.jsx)(g.c,{path:"/login",element:Object(S.jsx)(ve,{})}),Object(S.jsx)(g.c,{path:"*",element:Object(S.jsx)(g.a,{to:"/feed",replace:!0})})]})}),Object(S.jsx)(w,{})]})),Ne=new a.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});Object(c.render)(Object(S.jsx)(r.a,{store:f,children:Object(S.jsx)(a.QueryClientProvider,{client:Ne,children:Object(S.jsx)(o.a,{children:Object(S.jsx)(Ee,{})})})}),document.getElementById("root"))}},[[241,1,2]]]);
//# sourceMappingURL=main.6703e699.chunk.js.map